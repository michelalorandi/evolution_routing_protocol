add(if(or(or(notEqual(canStartTransfer,canStartTransfer),or(isTransferring,isTransferring)),notEqual(notEqual(canStartTransfer,isTransferring),or(isTransferring,isTransferring))),add(if(canStartTransfer,add(update,update)),add(if(isTransferring,tryAllMessagesToAllConnections),add(update,exchangeDeliverableMessages)))),if(or(notEqual(canStartTransfer,or(isTransferring,isTransferring)),or(notEqual(isTransferring,isTransferring),or(isTransferring,isTransferring))),add(add(if(isTransferring,tryOtherMessages),if(canStartTransfer,exchangeDeliverableMessages)),if(or(canStartTransfer,or(canStartTransfer,isTransferring)),if(canStartTransfer,return)))))