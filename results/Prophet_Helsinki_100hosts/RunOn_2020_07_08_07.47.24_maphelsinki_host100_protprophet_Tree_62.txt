add(if(or(notEqual(notEqual(canStartTransfer,isTransferring),not(isTransferring)),notEqual(notEqual(canStartTransfer,isTransferring),or(isTransferring,canStartTransfer))),tryAllMessagesToAllConnections),if(or(notEqual(notEqual(canStartTransfer,notEqual(isTransferring,canStartTransfer)),or(isTransferring,isTransferring)),notEqual(notEqual(canStartTransfer,isTransferring),notEqual(isTransferring,isTransferring))),add(if(notEqual(isTransferring,canStartTransfer),add(exchangeDeliverableMessages,exchangeDeliverableMessages)),if(notEqual(isTransferring,isTransferring),if(canStartTransfer,update)))))