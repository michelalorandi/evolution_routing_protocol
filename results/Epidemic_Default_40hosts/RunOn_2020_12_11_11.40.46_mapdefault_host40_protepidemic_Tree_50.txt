if(or(not(not(or(isTransferring,canStartTransfer))),not(not(canStartTransfer))),add(if(or(notEqual(canStartTransfer,isTransferring),or(isTransferring,isTransferring)),add(add(update,update),if(isTransferring,tryAllMessagesToAllConnections))),if(or(not(canStartTransfer),notEqual(canStartTransfer,isTransferring)),if(notEqual(isTransferring,canStartTransfer),if(canStartTransfer,exchangeDeliverableMessages)))))