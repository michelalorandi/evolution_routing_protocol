if(or(or(notEqual(notEqual(isTransferring,isTransferring),or(isTransferring,canStartTransfer)),or(notEqual(canStartTransfer,canStartTransfer),or(canStartTransfer,canStartTransfer))),notEqual(or(not(isTransferring),or(canStartTransfer,isTransferring)),or(not(isTransferring),or(isTransferring,canStartTransfer)))),add(if(not(not(isTransferring)),if(or(canStartTransfer,isTransferring),add(update,tryAllMessagesToAllConnections))),add(add(if(isTransferring,tryAllMessagesToAllConnections),if(isTransferring,update)),if(or(isTransferring,canStartTransfer),add(exchangeDeliverableMessages,return)))))