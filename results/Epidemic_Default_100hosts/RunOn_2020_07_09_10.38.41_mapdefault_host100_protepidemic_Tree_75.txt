add(if(isTransferring,tryAllMessagesToAllConnections),add(add(if(notEqual(canStartTransfer,isTransferring),add(exchangeDeliverableMessages,return)),add(if(or(canStartTransfer,isTransferring),exchangeDeliverableMessages),if(isTransferring,if(or(canStartTransfer,canStartTransfer),add(tryAllMessagesToAllConnections,tryAllMessagesToAllConnections))))),if(or(or(canStartTransfer,canStartTransfer),or(canStartTransfer,isTransferring)),add(add(update,exchangeDeliverableMessages),if(isTransferring,exchangeDeliverableMessages)))))