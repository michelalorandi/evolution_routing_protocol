if(canStartTransfer,if(notEqual(notEqual(notEqual(isTransferring,canStartTransfer),notEqual(canStartTransfer,isTransferring)),notEqual(not(canStartTransfer),or(canStartTransfer,isTransferring))),add(add(add(update,update),add(update,exchangeDeliverableMessages)),if(notEqual(or(canStartTransfer,isTransferring),notEqual(isTransferring,or(canStartTransfer,canStartTransfer))),add(tryAllMessagesToAllConnections,tryAllMessagesToAllConnections)))))