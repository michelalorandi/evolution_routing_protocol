if(or(or(or(notEqual(isTransferring,canStartTransfer),or(isTransferring,isTransferring)),not(or(canStartTransfer,isTransferring))),or(or(not(isTransferring),notEqual(canStartTransfer,isTransferring)),not(or(canStartTransfer,isTransferring)))),add(if(or(notEqual(canStartTransfer,canStartTransfer),notEqual(canStartTransfer,isTransferring)),if(not(canStartTransfer),add(update,exchangeDeliverableMessages))),if(or(or(canStartTransfer,canStartTransfer),or(isTransferring,isTransferring)),add(if(isTransferring,tryOtherMessages),add(exchangeDeliverableMessages,update)))))