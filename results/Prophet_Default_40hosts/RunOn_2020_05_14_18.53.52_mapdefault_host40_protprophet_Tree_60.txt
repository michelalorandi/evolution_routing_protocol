add(if(notEqual(notEqual(notEqual(isTransferring,isTransferring),not(canStartTransfer)),or(notEqual(canStartTransfer,or(canStartTransfer,isTransferring)),notEqual(canStartTransfer,isTransferring))),add(if(or(canStartTransfer,isTransferring),if(isTransferring,tryAllMessagesToAllConnections)),add(if(canStartTransfer,exchangeDeliverableMessages),add(update,return)))),add(if(or(not(canStartTransfer),notEqual(canStartTransfer,isTransferring)),if(or(canStartTransfer,isTransferring),add(tryAllMessagesToAllConnections,update))),if(canStartTransfer,add(add(tryOtherMessages,tryOtherMessages),if(canStartTransfer,if(canStartTransfer,exchangeDeliverableMessages))))))