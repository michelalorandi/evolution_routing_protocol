if(not(notEqual(notEqual(or(isTransferring,canStartTransfer),not(canStartTransfer)),or(notEqual(isTransferring,isTransferring),notEqual(canStartTransfer,isTransferring)))),add(add(if(notEqual(canStartTransfer,isTransferring),if(isTransferring,tryAllMessagesToAllConnections)),add(add(exchangeDeliverableMessages,update),if(canStartTransfer,exchangeDeliverableMessages))),add(add(exchangeDeliverableMessages,tryOtherMessages),if(notEqual(canStartTransfer,canStartTransfer),add(exchangeDeliverableMessages,tryAllMessagesToAllConnections)))))