add(if(notEqual(or(not(canStartTransfer),notEqual(canStartTransfer,isTransferring)),notEqual(or(isTransferring,canStartTransfer),notEqual(isTransferring,isTransferring))),add(if(not(or(not(isTransferring),notEqual(canStartTransfer,isTransferring))),if(isTransferring,update)),add(if(isTransferring,tryAllMessagesToAllConnections),if(isTransferring,tryAllMessagesToAllConnections)))),if(or(notEqual(not(canStartTransfer),notEqual(isTransferring,isTransferring)),notEqual(notEqual(isTransferring,isTransferring),notEqual(isTransferring,canStartTransfer))),if(notEqual(notEqual(canStartTransfer,canStartTransfer),canStartTransfer),add(if(isTransferring,tryAllMessagesToAllConnections),add(exchangeDeliverableMessages,return)))))