add(if(or(or(notEqual(isTransferring,isTransferring),or(canStartTransfer,canStartTransfer)),or(not(isTransferring),notEqual(canStartTransfer,canStartTransfer))),add(add(if(isTransferring,tryOtherMessages),add(exchangeDeliverableMessages,exchangeDeliverableMessages)),add(add(tryAllMessagesToAllConnections,tryAllMessagesToAllConnections),if(canStartTransfer,update)))),if(canStartTransfer,if(or(notEqual(isTransferring,isTransferring),or(canStartTransfer,canStartTransfer)),if(or(isTransferring,canStartTransfer),if(canStartTransfer,exchangeDeliverableMessages)))))